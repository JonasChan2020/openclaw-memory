# 实践项目：系统通知模块

> 开始时间: 2026-02-12 10:40
> 目标: 验证独立开发能力

---

## 1. 需求分析

### 功能定义
- **管理员**: 发布系统通知、查看通知列表、删除通知
- **用户**: 查看我的通知、标记已读、删除通知
- **系统**: 自动推送某些通知（如订阅到期提醒）

### 核心功能
1. 发布通知（标题、内容、类型、接收范围）
2. 通知列表（分页、筛选、搜索）
3. 通知详情
4. 标记已读/全部已读
5. 删除通知

### 数据结构
```csharp
// 通知表
Notification {
    Id: long
    Title: string(128)      // 标题
    Content: string         // 内容
    Type: string(32)        // 类型 (系统/订阅/活动)
    TargetScope: string(32) // 目标范围 (all/users/admins)
    IsPublished: bool       // 是否发布
    PublishTime: DateTime? // 发布时间
    ExpireTime: DateTime?  // 过期时间
    CreateUserId: long      // 创建者
    CreateTime: DateTime
}

// 用户通知关联表
UserNotification {
    Id: long
    NotificationId: long
    UserId: long
    IsRead: bool            // 是否已读
    ReadTime: DateTime?
    CreateTime: DateTime
}
```

---

## 2. 后端实现

### 2.1 Entity
- [ ] 创建 Notification.cs
- [ ] 创建 UserNotification.cs

### 2.2 Service
- [ ] NotificationService.cs
  - 发布通知
  - 获取通知列表
  - 获取我的通知
  - 标记已读
  - 删除通知

### 2.3 Controller
- [ ] NotificationController.cs
  - POST /api/toolsystem/notification
  - GET /api/toolsystem/notification/page
  - GET /api/toolsystem/notification/my
  - PUT /api/toolsystem/notification/{id}/read
  - DELETE /api/toolsystem/notification/{id}

---

## 3. 前端实现

### 3.1 API
- [ ] api/notification.ts
  - 通知列表
  - 发布通知
  - 我的通知
  - 标记已读

### 3.2 页面
- [ ] views/ToolsSystem/notification/
  - index.vue (通知列表)
  - publish.vue (发布通知)
  - my-notifications.vue (我的通知)

---

## 4. 进度记录

### Phase 1: 需求设计
- [x] 完成数据结构设计 ✅
- [x] 确定 API 规范 ✅

### Phase 2: 后端开发
- [x] 创建 Entity ✅
  - Notification.cs (通知表)
  - UserNotification.cs (用户通知关联表)
- [x] 创建 Service ✅
  - NotificationService.cs (通知服务)
  - 支持：列表查询、发布、编辑、删除、标记已读、全部已读
- [x] 创建 Controller ✅
  - NotificationController.cs

### Phase 3: 前端开发
- [x] 创建 API 接口 ✅
  - notification.ts
- [x] 开发通知管理页面 ✅
  - notification/index.vue
- [x] 开发我的通知页面 ✅
  - notification/my-notifications.vue

### Phase 4: 联调测试
- [ ] API 接口测试 (需运行项目)
- [ ] 前后端联调
- [ ] 修复 Bug

### Phase 5: 部署验证
- [ ] Docker 本地构建
- [ ] 测试运行
- [ ] 文档完善

---

## 代码统计

| 类型 | 文件数 | 代码行数 |
|------|--------|---------|
| Entity | 2 | ~100 行 |
| Service | 1 | ~280 行 |
| Controller | 1 | ~70 行 |
| API | 1 | ~50 行 |
| Vue 页面 | 2 | ~160 行 |
| **合计** | **8** | **~660 行** |

---

*实践进度: 2026-02-12 10:50*
*后端+前端代码已全部完成，等待测试验证*

---

*实践开始*
